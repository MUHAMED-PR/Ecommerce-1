<%- include('../layouts/adminHeader.ejs') %>

<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <!-- Layout container -->
        <div class="layout-page">
            <!-- Navbar -->
            <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme" id="layout-navbar">
                <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
                    <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                        <i class="bx bx-menu bx-sm"></i>
                    </a>
                </div>

                <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                    <!-- Search -->
                    <div class="navbar-nav align-items-center">
                        <div class="nav-item d-flex align-items-center">
                            <i class="bx bx-search fs-4 lh-0"></i>
                            <input type="text" class="form-control border-0 shadow-none" placeholder="Search..." aria-label="Search..." />
                        </div>
                    </div>
                    <!-- /Search -->

                    <ul class="navbar-nav flex-row align-items-center ms-auto">
                        <!-- User options here if needed -->
                    </ul>
                </div>
            </nav>
            <!-- / Navbar -->

            <!-- Content wrapper -->
            <div class="content-wrapper p-3">
                <!-- Header Section -->
                <div class="d-flex justify-content-between align-items-center ">
                    <h3 class="mt-1">Sales Report</h3>
                    <div>
                        <input type="text" class="form-control" id="date-range" placeholder="Select Date Range">
                    </div>
                </div>

                <!-- Summary Cards -->
                <div class="row ">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h5>Total Sales</h5>
                                <h3>₹<%= totalSale %></h3>
                                <!-- <span class="text-success">+8% from last month</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h5>Total Orders</h5>
                                <h3><%= orders.length %></h3>
                                <!-- <span class="text-success">+5% from last month</span> -->
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3 ">
                        <div class="card">
                            <div class="card-body">
                                <h5>Average Order Value</h5>
                                <h3>₹<%= (totalSale/orders.length).toFixed(2) %></h3>
                                <!-- <span class="text-danger">-2% from last month</span> -->
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-md-3 mb-4">
                        <div class="card">
                            <div class="card-body">
                                <h5>New Customers</h5>
                                <h3>320</h3>
                                <span class="text-success">+15% from last month</span>
                            </div>
                        </div>
                    </div> -->
                </div>

                <!-- Charts Section -->
                <!-- <div class="row mb-4">
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5>Sales Trends</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="salesTrendChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5>Category Performance</h5>
                            </div>
                            <div class="card-body">
                                <canvas id="categoryPerformanceChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div> -->

                <!-- Detailed Sales Table -->
                <div class="card">
                    <div class="card-header">
                        <h5>Sales Details</h5>
                    </div>
                    <div class="card-body">
                            <% if(orders.length === 0){ %>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>User Name</th>
                                    <th>Order Id</th>
                                    <th>Order Details</th>
                                    <th>Revenue</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2023-09-01</td>
                                    <td>Product A</td>
                                    <td>100</td>
                                    <td>$1,200</td>
                                    <td>North America</td>
                                </tr>
                                <!-- Add more rows as needed -->
                            </tbody>
                        </table>
                        <% } %>
                    </div>
                </div>

            </div>
            <!-- / Content wrapper -->
        </div>
        <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
</div>
<!-- / Layout wrapper -->

<%- include('../layouts/adminFooter.ejs') %>

<!-- Include Chart.js or any other charting library in your layout for chart rendering -->
<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Sample chart initialization
    var ctx = document.getElementById('salesTrendChart').getContext('2d');
    var salesTrendChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Sales',
                data: [1000, 1200, 900, 1400, 1300, 1700],
                borderColor: '#42a5f5',
                fill: false
            }]
        }
    });

    var ctx2 = document.getElementById('categoryPerformanceChart').getContext('2d');
    var categoryPerformanceChart = new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: ['Category A', 'Category B', 'Category C'],
            datasets: [{
                label: 'Sales',
                data: [5000, 3000, 2000],
                backgroundColor: ['#42a5f5', '#66bb6a', '#ff7043']
            }]
        }
    });
</script> -->
